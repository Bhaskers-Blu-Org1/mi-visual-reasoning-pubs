\documentclass[final,paperwidth=36in,paperheight=48in,portrait,fontscale=0.35]{baposter}
% NIPS Workshops format

% Encoding.
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{graphicx} % Required for including images
\usepackage{subfig}
\usepackage{booktabs} % for professional tables
\usepackage{floatrow}
\usepackage{float}

\usepackage{textgreek}
\usepackage{pstricks}
\usepackage{tikz}
\usepackage{pgf}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{multicol}
\usepackage{placeins} % For \FloatBarrier
\usetikzlibrary{positioning}
\usepackage{environ}
\makeatletter
\newsavebox{\measure@tikzpicture}
\NewEnviron{scaletikzpicturetowidth}[1]{%
	\def\tikz@width{#1}%
	\def\tikzscale{1}\begin{lrbox}{\measure@tikzpicture}%
		\BODY
	\end{lrbox}%
	\pgfmathparse{#1/\wd\measure@tikzpicture}%
	\edef\tikzscale{\pgfmathresult}%
	\BODY
}
\makeatother

\usepackage{amsmath} % For typesetting math
\usepackage{amssymb} % Adds new symbols to be used in math mode

\usepackage{booktabs} % Top and bottom rules for tables
\usepackage{enumitem} % Used to reduce itemize/enumerate spacing
%\usepackage{palatino} % Use the Palatino font
\renewcommand{\familydefault}{\sfdefault}
\usepackage[font=small,labelfont=bf]{caption} % Required for specifying captions to tables and figures

\usepackage{multicol} % Required for multiple columns
\setlength{\columnsep}{1.5em} % Slightly increase the space between columns
\setlength{\columnseprule}{0mm} % No horizontal rule between columns
\usepackage{multirow}
\usepackage{graphicx}

% For gap between cmidrules.
\usepackage{array}
\newcolumntype{C}{@{\extracolsep{0.1cm}}c@{\extracolsep{0pt}}}%

\setlength{\columnsep}{1cm}
\setlength{\columnseprule}{0.5pt}
\def\columnseprulecolor{\color{Plum}}


\newcommand{\compresslist}{ % Define a command to reduce spacing within itemize/enumerate environments, this is used right after \begin{itemize} or \begin{enumerate}
\setlength{\itemsep}{1pt}
\setlength{\parskip}{0pt}
\setlength{\parsep}{0pt}
}

% Defines the color used for content box headers
\definecolor{lightblue}{cmyk}{0.83,0.24,0,0.16}
%\definecolor{lightblue}{rgb}{0.145,0.6666,1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Begin of Document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Pojedyncze spacje po kropce.
\frenchspacing

\begin{document}



\hyphenation{resolution occlusions}
%%
\begin{poster}%
  % Poster Options
  {
  % Show grid to help with alignment
  grid=false,
  % Column spacing
  colspacing=1em,
  % Color style
  bgColorOne=white,
  bgColorTwo=white,
  borderColor=lightblue,
  headerColorOne=black,
  headerColorTwo=lightblue,
  headerFontColor=white,
  boxColorOne=white,
  boxColorTwo=lightblue,
  % Format of textbox
  textborder=roundedleft,
%  textborder=faded,
  % Format of text header
  eyecatcher=true,
  headerborder=closed,
  columns=2,
  headerheight=4cm,
%  textfont=\sc, An example of changing the text font
  headershape=roundedright,
  headershade=shadelr,
  headerfont=\Large\bf\textsc, %Sans Serif
  textfont={\setlength{\parindent}{1.5em}\large},
  boxshade=plain,
%  background=shade-tb,
  background=plain,
  linewidth=1pt
  } 
  { % Left Eye Catcher - IBM logo
\includegraphics[width=4cm]{../img/ibm_research.png}
  } 
  % Title
  	{\bf\textsc{On transfer learning using a MAC model variant}\vspace{0.2em}}
  % Authors
  {
	\textbf{Vincent Marois, T.S. Jayram, Vincent Albouy, Tomasz Kornuta, \\Younes Bouhadjar, Ahmet S. Ozcan}\\

	\texttt{\{vmarois,jayram,tkornut,byounes,asozcan\}@us.ibm.com},{\{vincent.albouy\}@ibm.com}\\
  }
  { % Left Eye Catcher
\includegraphics[width=4cm]{../img/arc_logo.png}
  }


% A coloured circle useful as a bullet with an adjustably strong filling
\newcommand{\colouredcircle}{%
\tikz{\useasboundingbox (-0.2em,-0.32em) rectangle(0.2em,0.32em); \draw[draw=black,fill=lightblue,line width=0.03em] (0,0) circle(0.16em);}}
\tikzstyle{block} = [draw,minimum size=2.5em, outer sep=2]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\headerbox{Abstract}{name=abstract,column=0,row=0}{
\begin{description}
	
	\item[$\bullet$] 	We introduce a variant of the MAC model (Hudson and Manning, ICLR 2018) with a simplified set of equations that achieves comparable accuracy, while training faster 
	
	\item[$\bullet$] We evaluate both models on CLEVR and CoGenT, and show that, transfer learning with fine-tuning results in a 15 point increase in accuracy, matching the state of the art.
	
	\item[$\bullet$] We demonstrate that improper fine-tuning can reduce a model's accuracy as well.
	
\end{description}

} %headerbox

\headerbox{The MAC Model ~\cite{hudson2018compositional}}{name=double-pendulum, column=0, below=abstract}{
	\begin{figure}[H]
		\centering
		\subfloat[]{{
				\includegraphics[width=0.35\textwidth]{../img/mac_cell.pdf}
				\label{subfig:pendulum_picture}
		}}
	
		\caption{The MAC cell ~\cite{hudson2018compositional}}
		\label{fig:pendulum}
	\end{figure}

\begin{description}
	\item[$\bullet$] The MAC network is a recurrent model that performs sequential reasoning; at each step the model analyzes the question and shifts the attention over the image
	\item[$\bullet$] The core of the model is the MAC cell, supported with an input unit that processes the question and image pair, and output unit which produces the answer.
	\item[$\bullet$] The input unit uses an LSTM to process the question in a word-by-word manner producing a sequence of contextual words and a final question representation.
	\item[$\bullet$] The input unit utilizes a pre-trained ResNet followed by two CNN layers to extract a feature map  from the image.
	
\end{description}

}

\headerbox{Simplified Mac Model (S-MAC)}{name=data acquisition, column=0, below=double-pendulum}{
	
	Our proposed modification to the MAC network is based on two heuristic simplifications of the
	MAC cell: 
	
	\begin{description}
	
    \item[$\bullet$] 	First, we observe that, taking the MAC cell equations as a whole, consecutive linear
	layers (with no activation in-between) can be combined as one linear layer. 
	
	\item[$\bullet$] Secondly, we assume that
	dimension-preserving linear layers are invertible so as to avoid information loss.
	
   \end{description}

\makebox[\textwidth]{MAC  \\[5cm] S-MAC}\\
\noindent\textbf{Control unit:} 
For both models, the question $q$ is first transformed in each step of 
the reasoning using a \emph{position-aware}
linear layer depending on $i$: $q_i = U_i^{[d \times 2d]} q + b_i^{[d]}$.


\begin{multicols}{2}
	\noindent
	\begin{align*}
	&cq_i = W_{cq}^{[d \times 2d]} [c_{i-1}, q_i] + b_{cq}^{[d]}  \tag{c1} \\
	&ca_{is} = W_{ca}^{[1 \times d]} (cq_i \odot \cw_s) + b_{ca}^{[1]}
	\tag{c2.1}\\
	&cv_{is} = \textrm{softmax}(ca_{is}) \tag{c2.2}\\
	&\cc_i = \sum_s cv_{is} \, \cw_s  \tag{c2.3}
	\end{align*}
	\columnbreak
	{\color{Plum}
		\begin{align*}
		&cq_i = W_{cq}^{[d \times d]} c_{i-1} + q_i  \tag{c1} \\
		&ca_{is} = W_{ca}^{[1 \times d]} (cq_i \odot \cw_s)  \tag{c2.1}\\
		&cv_{is} = \textrm{softmax}(ca_{is}) \tag{c2.2}\\
		&\cc_i = \sum_s cv_{is} \, \cw_s  \tag{c2.3}
		\end{align*}}
\end{multicols}

\vskip -0.6cm

\noindent\textbf{Read and write units:}
\begin{multicols}{2}
	\noindent
	\begin{align*}
	&I_{ihw} = (W_{m}^{[d \times d]} \mem_{i-1} + b_{m}^{[d]}) \\
	& \qquad \quad \odot (W_{k}^{[d \times d]} \kb_{hw} + b_{k}^{[d]}) \tag{r1} \\
	&I'_{ihw} =  W_{I'}^{[d \times 2d]} [I_{ihw},\kb_{hw}]  + b_{I'}^{[d]}  \tag{r2} \\
	&ra_{ihw} = W_{ra}^{[1 \times d]} (\cc_i \odot I'_{ihw}) + b_{ra}^{[1]} \tag{r3.1}\\
	&rv_{ihw} = \textrm{softmax}(ra_{ihw}) \tag{r3.2}\\
	&\rr_i = \sum_s rv_{ihw} \, \kb_{hw}  \tag{r3.3}\\
	&\mem_i = W_{rm}^{[d \times d]} [\rr_i, \mem_{i-1}]  + b_{rm}^{[d]} \tag{w1}	
	\end{align*}
	\columnbreak
	{\color{Plum}
		\begin{align*}
		&I_{ihw} = \mem_{i-1} \odot \kb_{hw} \tag{r1} \\ \\
		&I'_{ihw} = W_{I'}^{[d \times d]} I_{ihw} + b_{I'}^{[d]} + \kb_{hw} \tag{r2} \\
		&ra_{ihw} = W_{ra}^{[1 \times d]} (\cc_i \odot I'_{ihw})  \tag{r3.1}\\
		&rv_{ihw} = \textrm{softmax}(ra_{ihw}) \tag{r3.2}\\
		&\rr_i = \sum_s rv_{ihw} \, \kb_{hw}  \tag{r3.3}\\
		&\mem_i = W_{rm}^{[d \times 2d]} \rr_i + b_{rm}^{[d]} \tag{w1}
		\end{align*}}
\end{multicols}


	
\begin{table}[H]
	\centering
	\caption{Comparing the number of position-independent parameters between MAC \& S-MAC cells.}
	\begin{tabular}{llll}
		\toprule
		Model        & Read Unit               & Write Unit &  Control Unit         \\
		\midrule
		MAC   &  787,969 &  524,800        &    525,313    \\
		%\midrule
		simplified MAC & 263,168  & 262,656       &    263,168 \\
		\midrule
		Reduction by [\%]  & 67\%  &   50\%       &      50\%  \\
		\bottomrule
	\end{tabular}
	\label{tab:data_properties}
\end{table}




}

\headerbox{Transfer Learning - Experiments}{name=dataset, column=1}{

Along with CLEVR, the authors~\cite{johnson2017clevr} introduced  CLEVR-CoGenT (Compositional Generalization Test, CoGenT in short), with a goal of evaluating how well the models can generalize, learn relations and compositional concepts.
This dataset is generated in the same way as CLEVR, with two conditions, A and B. as shown in Table 2.
	
	\begin{table}[H]
		\centering
		\begin{tabular}{llll}
			\toprule
			Dataset        & Cubes              & Cylinders &  Spheres         \\
			\midrule
			CLEVR   &  any color &  any color        &    any color    \\
			CLEVR CoGenT A & gray / blue / brown / yellow  & red / green / purple / cyan       &    any color  \\
			CLEVR CoGenT B  & red / green / purple / cyan &   gray / blue / brown / yellow       &      any color  \\
			\bottomrule
		\end{tabular}
		\caption{Colors/shapes combinations present in CLEVR, CoGenT-A and CoGenT-B datasets.}
		\label{tab:cogent_conditions}
	\end{table}
	
	
	
	
	
	
	
	\begin{table}[H]
	\centering
	\scalebox{0.9}{
	\caption{CLEVR \& CoGenT accuracies for the MAC \& S-MAC models. The [Training] column indicates wall times and final accuracies on the training set. For fine-tuning, we use 30k samples of the test set, and kept the remainder for testing. The [Fine-tuning] column reports the used sub-set (30k samples) and the final accuracies on this sub-set during training. The [Test] column reports the used set and the obtained test accuracies. If no fine-tuning was done, the whole indicated set was used for testing.}
	\begin{tabular}{lllllllll}
		\toprule
		\multirow{2}{*}{Model} & \multicolumn{3}{c}{Training} &  \multicolumn{2}{c}{Fine-tuning} & \multicolumn{2}{c}{Test} & \multirow{2}{*}{Row} \\
		\cmidrule{2-4} \cmidrule{5-6} \cmidrule{7-8} 
		& Dataset                & Time [h:m] & Acc [\%]          & Dataset & Acc [\%]  & Dataset & Acc [\%] & \\
		\midrule
		MAC & CLEVR  & 30:52  & 96.70 & --   & --  & CLEVR    & 96.17         & (a) \\
		\cmidrule{1-8}
		\cmidrule{1-8}
		
		\multirow{13}{*}{S-MAC} & CLEVR  & 28:30  & 95.82 & --   & --  & CLEVR    & 95.29         & (b)  \\
		\cmidrule{2-4} \cmidrule{5-6} \cmidrule{7-8} 
		
		& CoGenT-A  & 28:33   & 96.09 &  --  &  --  & CoGenT-A & 95.91        & (c)  \\
		\cmidrule{2-4} \cmidrule{5-6} \cmidrule{7-8} 
		
		
		& \multirow{2}{*}{CLEVR}  & \multirow{2}{*}{28:30}  & \multirow{2}{*}{95.82} & \multirow{2}{*}{--}   & \multirow{2}{*}{--}  &   CoGenT-A    &  95.47  & (d) \\
		\cmidrule{7-8} 
		&                        &   &              &     &                               & CoGenT-B   &  95.58  & (e)\\		
		
		\cmidrule{2-4} \cmidrule{5-6} \cmidrule{7-8} 
		& \multirow{4}{*}{CoGenT-A}   & \multirow{4}{*}{28:33}   & \multirow{4}{*}{96.09}  &  \multirow{1}{*}{--}  &  \multirow{1}{*}{--}   & CogenT-B & 78.71        & (f)  \\
		\cmidrule{5-6} \cmidrule{7-8} 
		&                             &                                         &    &   \multirow{2}{*}{CoGenT-B}         &       \multirow{2}{*}{96.85}          & CoGenT-A &  91.24        & (g) \\
		\cmidrule{7-8} 
		&                             &                                         &       &         &                & CoGenT-B &    94.55     & (h)  \\
		
		\cmidrule{2-4} \cmidrule{5-6} \cmidrule{7-8} 
		& \multirow{2}{*}{CLEVR}  & \multirow{2}{*}{28:30}  & \multirow{2}{*}{95.82} &   \multirow{2}{*}{CoGenT-B}         &       \multirow{2}{*}{97.67}          & CoGenT-A &  92.11       & (i) \\
		\cmidrule{7-8} 
		&                             &                                         &       &         &                & CoGenT-B &    92.95    & (j)  \\  		
		
		
		\bottomrule
		
	
	\end{tabular}}
	\label{tab:data_properties}
\end{table}
}

\headerbox{MAC limitations on CLEVR}{name=baseline, column=1, below=dataset}{
	
	
	
	\begin{figure}[H]
	\centering
	\subfloat[]{{
			\includegraphics[width=0.6\textwidth]{../img/fail_mac_cogent_b_shape.png}
			\label{subfig:pendulum_picture}
	}}
	
	\caption{The question reads as: \textit{There is a large gray thing that is on the right side of the big gray cylinder left of the large ball that is on the right side if the cyan rubber sphere; what is its shape?}}
	\label{fig:fail_mac_shape}
\end{figure}
	\begin{figure}[H]
	\centering
	\subfloat[]{{
			\includegraphics[width=0.6\textwidth]{../img/fail_mac_cogent_b_color.png}
			\label{subfig:pendulum_picture}
	}}
	
	\caption{The question reads as: \textit{There is a tiny block behind the rubber thing that is right if the small brown rubber cylinder that is in front of the yellow metal cylinder; what color is it?}}
    \label{fig:fail_mac_color}
\end{figure}

	


}

\headerbox{References}{name=references, column=1, below=baseline}{
	\small
	\vspace{-8pt}
	\renewcommand{\refname}{}
	\bibliographystyle{alpha}
	\bibliography{vigil_bibliography}
	\normalsize
	\textsl{}
}

\end{poster}



\end{document}